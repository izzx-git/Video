Видео плеер для ZS GMX+HDD/SD+GS от izzx

Тема на форуме:
https://zx-pk.ru/threads/33885-video-dlya-zs-gmx.html?p=1135818#post1135818

Плеер основан на коде, взятом из:
FATALL v 0.25 (by savelij) - Драйверы FAT
Wild Player v0.333 (by Budder/MGN) - Звук через GS
Спасибо авторам за код, а также участникам форума за помощь.

Воспроизводится с FAT32 раздела.
Драйвер от FATALL переделан на открытые порты SMUC.
Работает на SD ZC,  HDD Smuc (с открытими портами), и, возможно, на HDD Nemo.
HDD Nemo с GMX не работает, только для версии стандартного экрана ZX.
Скорость 10 кадр/с. 
Для этой версии плеера файлы не должны быть фрагментированы. 
Если свободного места на диске достаточно, то фрагментации, скорее всего, не будет.
Размер кластера только стандартный, 4096.

Запуск:
Файлы *.GMA,  положить в корень раздела FAT.
Запустить DISK.TRD.

Как подготовить ролик:
1. Из видео файла выгрузить звук в формат WAV 11025 Гц, 8 бит, моно (в VLC).
Возможно, скорость звука придётся немного подгонять. Например, сделать 99% (в Free Audio Editor 2016).
2. Видео сделать частотой кадров кратной 10, например 30 (в Киностудии),
затем сохранить в картинки с частотой 10 кадр/с
(в VLC задать сохранить каждый 3 кадр, если всего 30 кадров).
3. Сконвертировать картинки в формат GMX 160*200 
(в Dadither выбрать формат, Fit result in source, затем обработка Batch Convert).
4. Склеить в один файл утилитой GMV_Join.exe.
Например: gmv_join scene sound.wav 56
Где:
scene - имя картинок. 
Утилита будет искать файлы с именем от scene00000.C до scene99999.C
sound.wav - файл звука.
56 - Пауза в кадрах перед началом изображения, для синхронизации звука. Чем меньше, тем раньше появится картинка.
На выходе будет файл VIDEO.GMV.


Формат кадра видео:
2048 байт звук (заполнен не весь)
16000 картинка
384 пусто
2048 пусто


Ссылки:

Конвертер картинок:
https://zx-pk.ru/threads/32400-dadither-eshche-odna-programka-dlya-dither-ga-kartinok.html?highlight=dadither

Как сохранить видео в картинки (через VLC):
https://culhu.ru/archives/25746

Как сохранить звук из видео (через VLC):
https://toadmin.ru/%D0%BA%D0%B0%D0%BA-%D0%B8%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D1%8C-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE-%D0%B7%D0%B2%D1%83%D0%BA%D0%BE%D0%B2%D1%8B%D1%85-%D0%B4%D0%BE%D1%80%D0%BE%D0%B6/

Формат заголовка WAV:
https://zxpress.ru/article.php?id=15214

В WAV после слова "data" 4 байта длины и начинается звук, 
и продолжается до цифры 0 и слова list в конце.


Скорости на чтение примерно такие:
ZC - 258048 байт/с (16 кадр/с по 16128 байт)
SMUC через 3d2f - 44491 байт/с (2,7 кадр/с)
SMUC через открытые порты - примерно равно ZC.
